# دليل اختبار نظام الملفات
# File Management System Testing Guide

## اختبارات سريعة - Quick Tests

### ✅ اختبار 1: عرض المهام
**الخطوات:**
1. افتح صفحة المهام
2. لاحظ البطاقات في الأعمدة الثلاثة (قيد الانتظار، جاري التنفيذ، مكتملة)
3. إذا كانت هناك ملفات، ستظهر حارة برتقالية توضح عدد الملفات

**النتيجة المتوقعة:** ✅ يجب أن تظهر بطاقات المهام مع شارات الملفات

---

### ✅ اختبار 2: فتح نموذج التفاصيل
**الخطوات:**
1. انقر على أي بطاقة مهمة
2. يجب أن يفتح نموذج يعرض:
   - عنوان المهمة
   - الوصف
   - الحالة والأولوية
   - القسم والموعد
   - قسم الملفات والمستندات

**النتيجة المتوقعة:** ✅ يجب أن يفتح النموذج مع جميع الأقسام

---

### ✅ اختبار 3: رفع الملفات (مستخدم عادي)
**المتطلبات:**
- دخول كمحامي (lawyer)
- فتح مهمة

**الخطوات:**
1. في النموذج، اذهب إلى قسم "الملفات والمستندات"
2. اسحب ملف PDF إلى منطقة الرفع أو انقر للاختيار
3. انقر على "رفع"

**النتائج المتوقعة:**
- ✅ يظهر رسالة نجاح
- ✅ يظهر الملف في القائمة
- ✅ يعرض: الاسم والحجم والتاريخ والمرفق

**يجب أن يفشل:**
- ❌ رفع أكثر من 30 ملف (حد المحامي)
- ❌ رفع ملف .exe
- ❌ رفع ملف أكبر من 50 MB

---

### ✅ اختبار 4: رفع الملفات (إدارة)
**المتطلبات:**
- دخول كإدارة (admin)

**الخطوات:**
1. فتح أي مهمة
2. رفع 51 ملف

**النتيجة المتوقعة:**
- ✅ يجب أن ترى حد أقصى 50 (وليس 30)
- ❌ الملف الـ 51 يفشل

---

### ✅ اختبار 5: تنزيل الملفات
**الخطوات:**
1. في قسم الملفات، انقر على زر التنزيل
2. تحقق من أن الملف اسمه الأصلي محفوظ

**النتيجة المتوقعة:**
- ✅ يتم تنزيل الملف بالاسم الأصلي
- ✅ الملف كامل وصحيح

---

### ✅ اختبار 6: حذف الملفات
**الخطوات:**
1. انقر على زر الحذف لملف
2. أكد الحذف
3. تحقق من اختفاء الملف

**النتيجة المتوقعة:**
- ✅ يظهر تأكيد قبل الحذف
- ✅ يختفي الملف من القائمة
- ✅ يظهر رسالة نجاح

**اختبار الصلاحيات:**
- محامي A يرفع ملف ❌ محامي B لا يستطيع حذفه
- محامي ✅ يستطيع حذف ملفه الخاص
- إدارة ✅ تستطيع حذف أي ملف

---

### ✅ اختبار 7: حدود الملفات
**الخطوات:**
1. لاحظ النص أسفل الملفات يظهر حد مثل: "5 من 30 ملف"
2. عند الوصول إلى 24 ملف (80%)، يظهر تنبيه

**النتيجة المتوقعة:**
- ✅ عرض الحد الأقصى الصحيح حسب الدور
- ✅ تنبيه عند 80%

---

### ✅ اختبار 8: أنواع الملفات المدعومة
**الملفات التي يجب أن تنجح:**
- ✅ صور: JPG, PNG, GIF, WebP
- ✅ مستندات: PDF, DOC, DOCX, XLS, XLSX, TXT
- ✅ أرشيفات: ZIP, RAR, 7Z

**الملفات التي يجب أن تفشل:**
- ❌ EXE, BAT, COM, SYS
- ❌ SCR, PIF, VBS
- ❌ APP, DMG (ملفات تنفيذية)

---

### ✅ اختبار 9: السجل النشاط
**الخطوات:**
1. انقر على سجل النشاطات من الواجهة الرئيسية
2. ابحث عن إدخالات بـ "file_uploaded" أو "file_deleted"

**النتيجة المتوقعة:**
- ✅ تظهر عمليات الرفع مع: اسم الملف والحجم والفئة
- ✅ تظهر عمليات الحذف مع: اسم الملف

---

### ✅ اختبار 10: واجهة السحب والإفلات
**الخطوات:**
1. في نموذج الملفات، اسحب عدة ملفات مرة واحدة
2. لاحظ تغيير اللون عند السحب
3. أفلت الملفات

**النتيجة المتوقعة:**
- ✅ تغيير لون الخلفية عند السحب
- ✅ رفع متعدد الملفات في مرة واحدة
- ✅ معاينة الملفات المختارة

---

## اختبارات متقدمة - Advanced Tests

### اختبار الأداء - Performance
```
اختبر رفع 20 ملف بحد أقصى في نفس الوقت
- يجب أن تكتمل في أقل من 30 ثانية
- يجب أن تظهر شريط التقدم
```

### اختبار الحد الأقصى للحجم
```
حاول رفع:
- ملف 50 MB ✅ (يجب أن ينجح)
- ملف 51 MB ❌ (يجب أن يفشل)
```

### اختبار الاتصال المنقطع
```
أثناء الرفع:
1. افصل الإنترنت
2. تابع الاتصال
- يجب أن يظهر رسالة خطأ
- يمكن إعادة المحاولة
```

---

## جدول التحقق - Checklist

- [ ] الملفات تظهر بالأيقونات الصحيحة
- [ ] الحد الأقصى مختلف لكل دور
- [ ] الحذف محدود حسب الدور
- [ ] السحب والإفلات يعمل
- [ ] الأسماء العربية محفوظة بشكل صحيح
- [ ] الملفات محفوظة في المجلد الصحيح
- [ ] السجل النشاط يسجل العمليات
- [ ] الأخطاء تظهر رسائل واضحة
- [ ] الملفات الكبيرة تظهر رسالة خطأ
- [ ] التنزيل يحافظ على الاسم الأصلي

---

## استكشاف الأخطاء - Troubleshooting

### ❌ المشكلة: الملفات لا تظهر
**الحل:**
1. افتح وحدة تحكم المتصفح (F12)
2. تحقق من رسائل الخطأ
3. تحقق من توفر الخادم على `http://localhost:5000`

### ❌ المشكلة: رسالة "غير مصرح"
**الحل:**
1. تحقق من صلاحيات المستخدم
2. تحقق من التوكن (localStorage)
3. تسجيل الدخول مجددًا

### ❌ المشكلة: الملفات لم تُرفع
**الحل:**
1. تحقق من حجم الملف (أقل من 50 MB)
2. تحقق من نوع الملف (مدعوم؟)
3. تحقق من عدد الملفات (أقل من الحد الأقصى)

### ❌ المشكلة: الواجهة لا تظهر
**الحل:**
1. تحقق من تثبيت npm packages
2. أعد تحميل الصفحة
3. امسح ذاكرة التخزين المؤقت (Ctrl+Shift+Del)

---

## نصائح الاختبار - Testing Tips

1. **استخدم ملفات حقيقية** بدلاً من ملفات وهمية
2. **اختبر أدوار مختلفة** (admin, lawyer, department_head)
3. **اختبر الحالات الحدية** (ملف واحد، 50 ملف)
4. **تحقق من المتصفح الآخر** لتجنب مشاكل التخزين المؤقت
5. **استخدم أدوات المطور** للتحقق من الطلبات والاستجابات

---

**تاريخ التحديث:** 2024-01-20
**الإصدار:** 1.0.0
